<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>æœºäº•ç”µè¯æŠ¥ä¿® - é¦–é¡µç›‘ç®¡å¼¹çª—ï¼ˆåŸå‹ï¼‰</title>
    <style>
        :root {
            --green: #10d48a;
            --yellow:#ffcc00;
            --danger:#ff5b5b;
            --bg-90: rgba(9, 14, 23, .9);
            --bg-80: rgba(9, 14, 23, .8);
            --line: rgba(255,255,255,.08);
            --text: #e8f1ff;
            --muted: #9fb3c8;
            --primary:#22c1dc;
        }

        html, body {
            height: 100%;
            margin: 0;
            color: var(--text);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "PingFang SC", "Microsoft YaHei", "WenQuanYi Micro Hei", sans-serif;
            background: #000;
            overflow: hidden;
        }

        /* åœ°å›¾å®¹å™¨ä½¿ç”¨ä½ çš„æˆªå›¾ä½œä¸ºèƒŒæ™¯ */
        .map {
            position: relative;
            width: 100vw;
            height: 100vh;
            background: url('./image.png') center/cover no-repeat #0b0f1a;
        }

        /* é¡¶éƒ¨çŠ¶æ€æ ä¸æŒ‰é’® */
        .top-bar {
            position: fixed;
            left: 16px;
            top: 16px;
            z-index: 5;
            display: flex;
            gap: 8px;
        }
        .btn {
            background: linear-gradient(180deg, rgba(34,193,220,.25), rgba(34,193,220,.05));
            color: var(--text);
            border: 1px solid var(--primary);
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            user-select: none;
        }
        .btn:active { transform: translateY(1px); }

        /* æœºäº•æ ‡è®°ï¼ˆç®€åŒ–ä¸ºå‘å…‰åœ†ç¯ï¼‰ */
        .marker {
            position: absolute;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            box-shadow: 0 0 0 2px rgba(0,0,0,.6) inset, 0 0 8px 2px rgba(0,0,0,.35);
            cursor: pointer;
        }
        .marker::after {
            content: '';
            position: absolute;
            inset: 3px;
            border-radius: 50%;
            background: radial-gradient(circle at 50% 50%, rgba(255,255,255,.85), rgba(255,255,255,.35) 45%, transparent 46%);
            mix-blend-mode: screen;
        }
        .marker.green { background: radial-gradient(circle, var(--green), rgba(16,212,138,.35)); }
        .marker.yellow { background: radial-gradient(circle, var(--yellow), rgba(255,204,0,.35)); }

        /* é—ªçƒåŠ¨ç”»ï¼ˆæŠ¥ä¿®ï¼‰ */
        @keyframes blink {
            0%, 100% { filter: drop-shadow(0 0 0 rgba(255,204,0,.0)) saturate(120%); transform: scale(1); }
            50% { filter: drop-shadow(0 0 10px rgba(255,204,0,.9)) saturate(180%); transform: scale(1.15); }
        }
        .blink {
            animation: blink 1.1s infinite ease-in-out;
        }

        /* ç½®é¡¶èŠå¤©å¼¹çª— */
        .chat-modal {
            position: fixed;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 864px;
            max-width: calc(100vw - 24px);
            background: var(--bg-90);
            border: 1px solid var(--primary);
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,.45);
            z-index: 10;
            display: none;
            flex-direction: column;
            backdrop-filter: blur(6px);
        }

        /* æŠ¥è­¦çŠ¶æ€ä¸‹çš„çº¢è‰²æµåŠ¨è¾¹æ¡†æ•ˆæœ */
        .chat-modal.alert {
            border: 2px solid var(--danger);
            animation: alertPulse 4s infinite ease-in-out;
        }

        /* é¼ æ ‡æ‚¬åœæ—¶æš‚åœåŠ¨ç”» */
        .chat-modal.alert:hover {
            animation-play-state: paused;
        }

        .chat-modal.alert::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border-radius: 14px;
            background: linear-gradient(45deg, 
                var(--danger) 0%, 
                #ff8a80 25%, 
                var(--danger) 50%, 
                #ff8a80 75%, 
                var(--danger) 100%);
            background-size: 200% 200%;
            animation: borderFlow 6s linear infinite;
            animation-play-state: var(--before-animation-play-state, running);
            z-index: -1;
        }

        .chat-modal.alert::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 12px;
            background: var(--bg-90);
            z-index: -1;
        }

        /* æŠ¥è­¦é—ªçƒåŠ¨ç”» */
        @keyframes alertPulse {
            0%, 100% { 
                box-shadow: 0 10px 40px rgba(0,0,0,.45), 0 0 20px rgba(255,91,91,.3);
                transform: translate(-50%, -50%) scale(1);
            }
            50% { 
                box-shadow: 0 10px 40px rgba(0,0,0,.45), 0 0 30px rgba(255,91,91,.8);
                transform: translate(-50%, -50%) scale(1.07);
            }
        }

        /* è¾¹æ¡†æµåŠ¨åŠ¨ç”» */
        @keyframes borderFlow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* æ ‡é¢˜é—ªçƒæ•ˆæœ */
        .chat-modal.alert .chat-title {
            animation: titleBlink 3s infinite ease-in-out;
        }

        @keyframes titleBlink {
            0%, 100% { color: var(--text); }
            50% { color: var(--danger); }
        }
        .chat-modal.visible { display: flex; }
        .chat-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
            padding: 10px 14px;
            border-bottom: 1px solid var(--line);
            background: linear-gradient(180deg, rgba(34,193,220,.15), rgba(34,193,220,.06));
            border-radius: 12px 12px 0 0;
        }
        .chat-title { font-weight: 600; letter-spacing: .5px; }
        .chat-actions { display: flex; gap: 8px; }
        .icon-btn {
            width: 28px; height: 28px; border-radius: 6px; border: 1px solid var(--line);
            background: rgba(255,255,255,.04); color: var(--text); cursor: pointer;
        }

        .chat-body {
            display: grid;
            grid-template-columns: 320px 1fr;
            gap: 12px;
            padding: 12px;
        }
        .well-card {
            border: 1px solid var(--line);
            border-radius: 10px;
            padding: 12px;
            background: var(--bg-80);
        }
        .well-card h4 { margin: 0 0 8px 0; font-size: 16px; }
        .well-meta { font-size: 13px; line-height: 1.6; color: var(--muted); }
        .well-meta b { color: var(--text); font-weight: 600; }
        .well-meta .fault-content { color: var(--danger); font-weight: 600; }
        .well-meta .phone-number { color: var(--danger); font-weight: 600; }

        .dialog {
            border: 1px solid var(--line);
            border-radius: 10px;
            padding: 12px;
            background: var(--bg-80);
            display: flex; flex-direction: column; gap: 10px;
            max-height: 72vh; overflow: hidden;
        }
        .msg { display: flex; gap: 10px; align-items: flex-end; }
        .msg .avatar { width: 34px; height: 34px; border-radius: 50%; flex: 0 0 34px; border: 1px solid var(--line); display:flex; align-items:center; justify-content:center; color:#d7e7ff; font-size: 12px; font-weight: 700; letter-spacing: .5px; }
        .avatar-ai { background: radial-gradient(120px 120px at 30% 30%, #2f7cff, #1b2540); box-shadow: inset 0 0 8px rgba(255,255,255,.08); }
        .avatar-user { background: radial-gradient(120px 120px at 70% 30%, #21b37b, #132a20); box-shadow: inset 0 0 8px rgba(255,255,255,.08); }
        .msg .bubble {
            max-width: 72%; padding: 9px 12px; border-radius: 10px; line-height: 1.6; font-size: 14px;
            border: 1px solid var(--line);
        }
        .msg.left { justify-content: flex-start; }
        .msg.left .bubble { background: #202a38; }
        .msg.right { justify-content: flex-end; }
        .msg.right .bubble { background: #1f3b2a; border-color: rgba(16,212,138,.35); }
        .msg.left .bubble { border-top-left-radius: 4px; }
        .msg.right .bubble { border-top-right-radius: 4px; }
        .time { text-align: center; color: var(--muted); font-size: 12px; margin: 4px 0; }

        /* å·²å»é™¤è¾“å…¥æ¡†ï¼Œä¿ç•™æ ·å¼å ä½ä»¥ä¾¿åç»­å¯èƒ½æ¢å¤ */

        /* å°æç¤ºæ ‡ç­¾ */
        .hint {
            position: fixed; right: 12px; bottom: 12px; z-index: 6;
            background: rgba(255,255,255,.06); border: 1px solid var(--line);
            padding: 6px 10px; border-radius: 8px; font-size: 12px; color: var(--muted);
        }

        /* ç®€å•çš„æ ‡ç­¾æç¤º */
        .tooltip { position: absolute; left: 22px; top: -2px; background: rgba(0,0,0,.6); border: 1px solid var(--line); color: #cbe1ff; padding: 2px 6px; border-radius: 6px; font-size: 12px; white-space: nowrap; display: none; }
        .marker:hover + .tooltip { display: block; }
    </style>
</head>
<body>
    <div class="map" id="map">
        <div class="top-bar">
            <button class="btn" id="simulateBtn">æ¨¡æ‹Ÿä¸€æ¡æŠ¥ä¿®</button>
            <button class="btn" id="clearBtn">æ¸…é™¤é—ªçƒ/å…³é—­å¼¹çª—</button>
        </div>

        <!-- æ¼”ç¤ºï¼šæ”¾ç½®å°‘é‡æœºäº•æ ‡è®°ï¼ˆç»å¯¹å®šä½ï¼‰ï¼Œç»¿è‰²ä¸ºæ­£å¸¸ -->
        <!-- ä¸ºç®€æ´èµ·è§ï¼Œä»…æ”¾ä¸‰ä¸ªï¼›çœŸå®é¡¹ç›®å¯ä»¥æ ¹æ®åæ ‡æ‰¹é‡æ¸²æŸ“ -->
        <div class="marker green" style="left: 28%; top: 46%;" data-id="ZQ0858"></div>
        <div class="tooltip" style="left: 28%; top: 46%;">ZQ0858 å¼ æ¡¥é•‡Â·å¼ æ¡¥æ‘</div>

        <div class="marker green" style="left: 48%; top: 33%;" data-id="AB1201"></div>
        <div class="tooltip" style="left: 48%; top: 33%;">AB1201 å¾é›†é•‡Â·å‰è¡—æ‘</div>

        <div class="marker green" style="left: 63%; top: 62%;" data-id="MN4420"></div>
        <div class="tooltip" style="left: 63%; top: 62%;">MN4420 æ±¤åº„é•‡Â·æ²³è¥¿æ‘</div>
    </div>

    <!-- ç½®é¡¶èŠå¤©å¼¹çª— -->
    <section class="chat-modal" id="chatModal" aria-hidden="true">
        <header class="chat-header">
            <div class="chat-title">å¯¹è¯ ID Â· <span id="dialogId">â€”</span>ï½œæœºäº•æŠ¥ä¿®äº’åŠ¨ Â· <span id="wellTitle">ZQ0858</span></div>
            <div class="chat-actions">
                <button class="icon-btn" id="minBtn" title="æœ€å°åŒ–">â€”</button>
                <button class="icon-btn" id="closeBtn" title="å…³é—­">Ã—</button>
            </div>
        </header>
        <div class="chat-body">
            <aside class="well-card">
                <h4>æœºäº•ä¿¡æ¯</h4>
                <div class="well-meta" id="wellInfo">
                    <div><b>æœºäº•ä½ç½®ï¼š</b>å¼ æ¡¥é•‡ã€å¼ æ¡¥æ‘</div>
                    <div><b>æœºäº•ç¼–å·ï¼š</b>ZQ0858</div>
                    <div><b>æŠ¥ä¿®æ—¶é—´ï¼š</b>2025-10-01 08:56:48</div>
                    <div><b>æŠ¥ä¿®äººç”µè¯ï¼š</b>18512345678</div>
                    <div><b>æŠ¥ä¿®æ•…éšœå†…å®¹ï¼š</b>ä¸é€šç”µï¼Œæ°´æ³µä¸å·¥ä½œ</div>
                    <div><b>å·¡æ£€å‘˜ï¼š</b>å¼ ä¸‰ä¸¨18801235678</div>
                </div>
            </aside>

            <main class="dialog" id="dialog"></main>
        </div>
    </section>

    <div class="hint">æç¤ºï¼šç‚¹å‡»â€œæ¨¡æ‹Ÿä¸€æ¡æŠ¥ä¿®â€æˆ–ç›´æ¥ç‚¹åœ°å›¾ä¸Šçš„äº•æ ‡è¿›è¡Œæ¼”ç¤º</div>

    <script>
        const mapEl = document.getElementById('map');
        const simulateBtn = document.getElementById('simulateBtn');
        const clearBtn = document.getElementById('clearBtn');
        const chatModal = document.getElementById('chatModal');
        const closeBtn = document.getElementById('closeBtn');
        const minBtn = document.getElementById('minBtn');
        const wellTitle = document.getElementById('wellTitle');
        const dialogIdEl = document.getElementById('dialogId');
        const wellInfo = document.getElementById('wellInfo');
        const dialog = document.getElementById('dialog');
        
        
        // åªè¯»æ¨¡å¼ï¼šä¸å†ä½¿ç”¨è¾“å…¥æ¡†

        /**
         * demo æ•°æ®ï¼šä»¥ ZQ0858 ä¸ºä¸»
         */
        const demoWells = {
            ZQ0858: {
                id: 'ZQ0858',
                position: 'å¼ æ¡¥é•‡ã€å¼ æ¡¥æ‘',
                reportTime: '2025-10-01 08:56:48',
                reporterPhone: '18512345678',
                issue: 'ä¸é€šç”µï¼Œæ°´æ³µä¸å·¥ä½œ',
                inspector: 'å¼ ä¸‰ä¸¨18801235678'
            },
            AB1201: {
                id: 'AB1201', position: 'å¾é›†é•‡ã€å‰è¡—æ‘', reportTime: 'â€”', reporterPhone: 'â€”', issue: 'â€”', inspector: 'â€”'
            },
            MN4420: {
                id: 'MN4420', position: 'æ±¤åº„é•‡ã€æ²³è¥¿æ‘', reportTime: 'â€”', reporterPhone: 'â€”', issue: 'â€”', inspector: 'â€”'
            }
        };

        /**
         * å·¥å…·ï¼šæ‰“å¼€å¼¹çª—å¹¶å¡«å……ä¿¡æ¯
         */
        function openChatForWell(wellId, isAlert = true) {
            const info = demoWells[wellId] || demoWells['ZQ0858'];
            wellTitle.textContent = info.id;
            // ç”Ÿæˆå¯¹è¯ID
            const did = cryptoRandomId();
            dialogIdEl.textContent = 'ğŸš¨ ä½ æœ‰ä¸€æ¡æ–°çš„æŠ¥è­¦æ¶ˆæ¯';
            wellInfo.innerHTML = `
                <div><b>æœºäº•ä½ç½®ï¼š</b>${info.position}</div>
                <div><b>æœºäº•ç¼–å·ï¼š</b>${info.id}</div>
                <div><b>æŠ¥ä¿®æ—¶é—´ï¼š</b>${info.reportTime}</div>
                <div><b>æŠ¥ä¿®äººç”µè¯ï¼š</b><span class="phone-number">${info.reporterPhone}</span></div>
                <div><b>æŠ¥ä¿®æ•…éšœå†…å®¹ï¼š</b><span class="fault-content">${info.issue}</span></div>
                <div><b>å·¡æ£€å‘˜ï¼š</b>${info.inspector}</div>
            `;
            // åªè¯»åŒæ­¥ï¼šé‡ç½®å¹¶æ³¨å…¥é¢„ç½®å¯¹è¯ï¼ˆå‚è€ƒæˆªå›¾2+æ–°æˆªå›¾ï¼‰
            dialog.innerHTML = '';
            appendTimeTag();
            appendLeft('æ¬¢è¿æ¥åˆ°å•†ä¸˜å¸‚æœºäº•æŠ¥ä¿®æœåŠ¡å¹³å°,è¯·é—®ä½ è¦æŠ¥ä¿®çš„æœºäº•åœ¨å“ªä¸ªä¹¡é•‡ï¼Ÿ');
            appendRight('å†¯æ¡¥é•‡æ›¹åº„æ‘ã€‚');
            appendLeft('å¥½çš„ï¼Œæ‚¨åœ¨å†¯æ¡¥é•‡æ›¹åº„æ‘ã€‚è¯·è¯´ä¸€è¯´æœºäº•å‡ºç°çš„é—®é¢˜ã€‚');
            appendRight('å—¯ï¼Œè¿™è¾¹æ²¡æœ‰ç”µäº†ã€‚');
            appendLeft('å¥½çš„ï¼Œæ‚¨çŸ¥é“æœºäº•ç¼–å·å—ï¼Ÿæœºäº•ç¼–å·åœ¨äº•ç‰Œä¸Šã€‚');
            appendRight('å—¯ï¼Œç¼–å·æ˜¯0980ã€‚');
            appendLeft('å¥½çš„ï¼Œè·Ÿæ‚¨ç¡®è®¤ä¸€ä¸‹ï¼šæœºäº•åœ¨å†¯æ¡¥é•‡æ›¹åº„æ‘ï¼Œé—®é¢˜æ˜¯è¿™è¾¹æ²¡æœ‰ç”µäº†ï¼Œæœºäº•ç¼–å·æ˜¯0980ï¼Œå¯¹å—ï¼Ÿ');
            appendRight('æ˜¯çš„ï¼Œå¯¹ã€‚');
            appendLeft('å¥½å˜ï¼æ‚¨çš„æŠ¥ä¿®å•å·²ç”Ÿæˆã€‚ç»´ä¿®å¸ˆå‚…ä¼šå°½å¿«è”ç³»æ‚¨ï¼Œè¯·æ‰‹æœºå·ä¿æŒç•…é€šï¼Œå†è§ï¼');
            
            // æ·»åŠ æŠ¥è­¦åŠ¨æ•ˆ
            if (isAlert) {
                chatModal.classList.add('alert');
                // æ·»åŠ ä¸€ä¸ªç´§æ€¥æç¤ºéŸ³æ•ˆï¼ˆå¯é€‰ï¼‰
                playAlertSound();
            } else {
                chatModal.classList.remove('alert');
            }
            
            chatModal.classList.add('visible');
            chatModal.setAttribute('aria-hidden', 'false');
        }

        /**
         * æ’­æ”¾æŠ¥è­¦æç¤ºéŸ³ï¼ˆå¯é€‰åŠŸèƒ½ï¼‰
         */
        function playAlertSound() {
            try {
                // åˆ›å»ºä¸€ä¸ªç®€å•çš„æç¤ºéŸ³
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
                oscillator.frequency.setValueAtTime(600, audioContext.currentTime + 0.1);
                oscillator.frequency.setValueAtTime(800, audioContext.currentTime + 0.2);
                
                gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.3);
            } catch (e) {
                // å¦‚æœéŸ³é¢‘æ’­æ”¾å¤±è´¥ï¼Œé™é»˜å¤„ç†
                console.log('éŸ³é¢‘æ’­æ”¾å¤±è´¥ï¼Œç»§ç»­æ˜¾ç¤ºè§†è§‰æç¤º');
            }
        }

        /**
         * å·¥å…·ï¼šå°†æŸä¸ª marker ç½®ä¸ºæŠ¥ä¿®çŠ¶æ€ï¼ˆé»„+é—ªçƒï¼‰
         */
        function setMarkerReported(markerEl) {
            markerEl.classList.remove('green');
            markerEl.classList.add('yellow', 'blink');
        }

        /** å‘é€æ¶ˆæ¯ï¼ˆå³ä¾§æ°”æ³¡ï¼‰ */
        function sendMessage(text) {
            if (!text.trim()) return;
            appendRight(text.trim());
            dialog.scrollTop = dialog.scrollHeight;

            // ç®€å•æœºå™¨äººå›å¤
            setTimeout(() => {
                appendLeft('å·²å®‰æ’å°±è¿‘å·¡æ£€å‘˜å‰å¾€ï¼Œè¯·ä¿æŒç”µè¯ç•…é€šã€‚');
                dialog.scrollTop = dialog.scrollHeight;
            }, 650);
        }

        // å·¥å…·ï¼šæ—¶é—´ä¸æ¶ˆæ¯æ¸²æŸ“
        function appendTimeTag() {
            const t = document.createElement('div');
            t.className = 'time';
            const now = new Date();
            const hh = String(now.getHours()).padStart(2,'0');
            const mm = String(now.getMinutes()).padStart(2,'0');
            t.textContent = `ä»Šå¤© ${hh}:${mm}`;
            dialog.appendChild(t);
        }
        function appendLeft(text) {
            const row = document.createElement('div');
            row.className = 'msg left';
            const avatar = document.createElement('div');
            avatar.className = 'avatar avatar-ai';
            avatar.textContent = 'AI';
            const bubble = document.createElement('div');
            bubble.className = 'bubble';
            bubble.textContent = text;
            row.appendChild(avatar);
            row.appendChild(bubble);
            dialog.appendChild(row);
        }
        function appendRight(text) {
            const row = document.createElement('div');
            row.className = 'msg right';
            const bubble = document.createElement('div');
            bubble.className = 'bubble';
            bubble.textContent = text;
            const avatar = document.createElement('div');
            avatar.className = 'avatar avatar-user';
            avatar.textContent = 'æˆ‘';
            row.appendChild(bubble);
            row.appendChild(avatar);
            dialog.appendChild(row);
        }
        function cryptoRandomId() {
            try {
                const a = crypto.getRandomValues(new Uint8Array(8));
                return Array.from(a).map(x=>x.toString(16).padStart(2,'0')).join('').toUpperCase();
            } catch(e) {
                return Math.random().toString(16).slice(2,10).padEnd(16,'0').toUpperCase();
            }
        }

        // ç‚¹å‡»"æ¨¡æ‹Ÿä¸€æ¡æŠ¥ä¿®"ï¼šé»˜è®¤è®© ZQ0858 è¿›å…¥æŠ¥ä¿®å¹¶æ‰“å¼€å¼¹çª—
        simulateBtn.addEventListener('click', () => {
            const marker = document.querySelector('.marker[data-id="ZQ0858"]');
            if (marker) setMarkerReported(marker);
            openChatForWell('ZQ0858');
        });

        // æ¸…é™¤çŠ¶æ€
        clearBtn.addEventListener('click', () => {
            document.querySelectorAll('.marker').forEach(m => m.classList.remove('yellow', 'blink'));
            document.querySelectorAll('.marker').forEach(m => m.classList.add('green'));
            chatModal.classList.remove('visible', 'alert');
            chatModal.setAttribute('aria-hidden', 'true');
        });

        // å…è®¸ç‚¹å‡»ä»»æ„ marker è§¦å‘æŠ¥ä¿®æ¼”ç¤º
        mapEl.querySelectorAll('.marker').forEach(marker => {
            marker.addEventListener('click', () => {
                const wellId = marker.getAttribute('data-id');
                setMarkerReported(marker);
                openChatForWell(wellId);
            });
        });

        // å¼¹çª—äº¤äº’
        closeBtn.addEventListener('click', () => {
            chatModal.classList.remove('visible', 'alert');
            chatModal.setAttribute('aria-hidden', 'true');
        });
        minBtn.addEventListener('click', () => {
            if (chatModal.style.transform.includes('translateY(-80%)')) {
                chatModal.style.transform = 'translate(-50%, -50%)';
            } else {
                chatModal.style.transform = 'translate(-50%, -80%)';
            }
        });

        // é¼ æ ‡æ‚¬åœäº¤äº’ï¼šæš‚åœ/æ¢å¤åŠ¨ç”»
        chatModal.addEventListener('mouseenter', () => {
            if (chatModal.classList.contains('alert')) {
                chatModal.style.animationPlayState = 'paused';
                // ä¹Ÿæš‚åœä¼ªå…ƒç´ çš„åŠ¨ç”»
                const beforeElement = window.getComputedStyle(chatModal, '::before');
                chatModal.style.setProperty('--before-animation-play-state', 'paused');
            }
        });

        chatModal.addEventListener('mouseleave', () => {
            if (chatModal.classList.contains('alert')) {
                chatModal.style.animationPlayState = 'running';
                // æ¢å¤ä¼ªå…ƒç´ çš„åŠ¨ç”»
                chatModal.style.setProperty('--before-animation-play-state', 'running');
            }
        });

        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨æ‰“å¼€å¼¹çª—
        document.addEventListener('DOMContentLoaded', () => {
            // å»¶è¿Ÿ1ç§’åè‡ªåŠ¨æ‰“å¼€å¼¹çª—ï¼Œè®©é¡µé¢å®Œå…¨åŠ è½½
            setTimeout(() => {
                openChatForWell('ZQ0858', true); // é»˜è®¤æŠ¥è­¦çŠ¶æ€ï¼Œæ˜¾ç¤ºé—ªçƒæ•ˆæœ
            }, 1000);
        });
    </script>
</body>
</html>


